(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{578:function(s,a,t){"use strict";t.r(a);var n=t(13),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[t("code",[s._v("进程")]),s._v("是应用程序的"),t("code",[s._v("载体")]),s._v("，程序启动时会创建一个"),t("code",[s._v("进程")]),s._v("，而"),t("code",[s._v("进程")]),s._v("会启动多个"),t("code",[s._v("线程")]),s._v("。")]),s._v(" "),t("br"),s._v(" "),t("h1",{attrs:{id:"_1-thread"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-thread"}},[s._v("#")]),s._v(" 1 Thread")]),s._v(" "),t("p",[t("code",[s._v("C#")]),s._v("中的"),t("code",[s._v("Thread类")]),s._v("可用于创建线程，本质上是通过"),t("code",[s._v("委托")]),s._v("实现的。创建线程的过程中，我们常常需要向子线程传递参数，目前主要有两种方法来实现，即"),t("code",[s._v("直接传参")]),s._v("和"),t("code",[s._v("自定义类传参")]),s._v("。")]),s._v(" "),t("br"),s._v(" "),t("h2",{attrs:{id:"_1-1-直接传参"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-直接传参"}},[s._v("#")]),s._v(" 1.1 直接传参")]),s._v(" "),t("p",[t("code",[s._v("直接传参")]),s._v("适用于"),t("code",[s._v("无参无返回值")]),s._v("、"),t("code",[s._v("单个参数无返回值")]),s._v("两种类型的方法。使用"),t("code",[s._v("Thread")]),s._v("创建并启动线程的步骤如下")]),s._v(" "),t("div",{staticClass:"language-Java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/*\n * Stage1.无参，无返回值\n */")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ThreadTest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("WriteLine")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ThreadTest started"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("WriteLine")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ThreadTest running"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Sleep")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("WriteLine")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ThreadTest completed"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread")]),s._v(" thread1 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ThreadTest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("thread1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),s._v("Start")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* \n * Stage2.单个参数，无返回值\n */")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// object等价于System.Object")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 所有类型的基类,具体使用时强制类型转换")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DownloadFile")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" o"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 使用as强制类型转换，转换失败返回null")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// as不能给强转为结构体！")]),s._v("\n    string str "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" o as string"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("WriteLine")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("$"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"FileName:{str}"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 在启动时填入参数")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread")]),s._v(" thread2 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DownLoadFile")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("thread1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),s._v("Start")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"JingkeImage"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("p",[s._v("当传递的参数较多时，可以将其整合为"),t("code",[s._v("结构体")]),s._v("，将结构体作为参数传递。")]),s._v(" "),t("br"),s._v(" "),t("h2",{attrs:{id:"_1-2-自定义类传参"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-自定义类传参"}},[s._v("#")]),s._v(" 1.2 自定义类传参")]),s._v(" "),t("p",[t("code",[s._v("自定义类传参")]),s._v("的基本思想是，将"),t("code",[s._v("参数")]),s._v("和"),t("code",[s._v("方法")]),s._v("放在同一个"),t("code",[s._v("类")]),s._v("中，这样使用"),t("code",[s._v("类中的方法")]),s._v("创建的线程就能访问"),t("code",[s._v("类中的参数")]),s._v("了。举例如下")]),s._v(" "),t("div",{staticClass:"language-Java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DownloadFile")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    string url"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    string storePath"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    \n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DownloadFile")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("string url"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" string storePath"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    \t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("url "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" url"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("storePath "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" storePath"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    \n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Download")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("WriteLine")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("$"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Download file from {url}, file is stored in storePath."')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Step1.创建实例")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DownloadFile")]),s._v(" downloadFile "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DownloadFile")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://www.kc114.com//ke.pdf"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"D:\\\\"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Step2.创建Thread实例")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread")]),s._v(" thread "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("downloadFile"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),s._v("Download")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Step3.启动子线程")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("thread"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),s._v("Start")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("br"),s._v(" "),t("h2",{attrs:{id:"_1-3-id获取"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-id获取"}},[s._v("#")]),s._v(" 1.3 ID获取")]),s._v(" "),t("ul",[t("li",[t("p",[t("strong",[s._v("线程id")])]),s._v(" "),t("div",{staticClass:"language-Java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Method1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Environment"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("CurrentManagedThreadId")]),s._v("\n    \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Method2")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("CurrentThread"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ManagedThreadId")]),s._v("\n")])])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("进程id")])]),s._v(" "),t("div",{staticClass:"language-Java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("GetCurrentProcessorId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])])])]),s._v(" "),t("br"),s._v(" "),t("h1",{attrs:{id:"_2-前台线程-后台线程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-前台线程-后台线程"}},[s._v("#")]),s._v(" 2 前台线程 & 后台线程")]),s._v(" "),t("ul",[t("li",[t("p",[t("code",[s._v("前台线程")]),s._v("：线程的一种，当==所有前台线程==结束之前程序不会停止运行。所有使用"),t("code",[s._v("Thread")]),s._v("创建的线程默认是"),t("code",[s._v("前台线程")]),s._v("！")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("后台线程")]),s._v("：会随着所有==前台线程==的结束而结束，而不管其自身是否结束。创建"),t("code",[s._v("后台线程")]),s._v("需要在"),t("code",[s._v("Thread类")]),s._v("中指定"),t("code",[s._v("参数IsBackground")]),s._v("。")])])]),s._v(" "),t("div",{staticClass:"language-Java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 前台线程")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread")]),s._v(" thread "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ThreadTest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IsBackground")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\t\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 后台线程")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread")]),s._v(" thread "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ThreadTest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IsBackground")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("br"),s._v(" "),t("h1",{attrs:{id:"_3-优先级"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-优先级"}},[s._v("#")]),s._v(" 3 优先级")]),s._v(" "),t("p",[t("code",[s._v("C#")]),s._v("中的线程优先级从高到低分为"),t("code",[s._v("Highest")]),s._v("、"),t("code",[s._v("AboveNormal")]),s._v("、"),t("code",[s._v("Normal")]),s._v("、"),t("code",[s._v("BelowNormal")]),s._v("和"),t("code",[s._v("Lowest")]),s._v("，通过设置"),t("code",[s._v("Thread实例")]),s._v("中"),t("code",[s._v("Priority")]),s._v("的值可以更改线程的优先级，默认为"),t("code",[s._v("Normal")]),s._v("。线程优先级的设置方法如下")]),s._v(" "),t("div",{staticClass:"language-Java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Step1.创建实例")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread")]),s._v(" thread "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ThreadTest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Step2.设置优先级")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("thread"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),s._v("Priority")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ThreadPriority"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Normal")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Step3.启动线程")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("thread"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),s._v("Start")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("br"),s._v(" "),t("h1",{attrs:{id:"_4-线程状态"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-线程状态"}},[s._v("#")]),s._v(" 4 线程状态")]),s._v(" "),t("p",[t("code",[s._v("C#")]),s._v("中线程的主要状态包括："),t("code",[s._v("Unstarted")]),s._v("、"),t("code",[s._v("Running")]),s._v("、"),t("code",[s._v("WaitSleepJoin")])]),s._v(" "),t("ul",[t("li",[t("code",[s._v("Unstarted")]),s._v("：线程被创建后，被CPU调用前的状态")]),s._v(" "),t("li",[t("code",[s._v("Running")]),s._v("：线程被CPU调用")]),s._v(" "),t("li",[t("code",[s._v("WaitSleepJoin")]),s._v("：使用了sleep方法后的线程")])]),s._v(" "),t("p",[t("code",[s._v("Join")]),s._v("方法可以将"),t("code",[s._v("Thread")]),s._v("实例加入到当前线程，与"),t("code",[s._v("Start")]),s._v("方法的不同之处在于，"),t("code",[s._v("Start")]),s._v("方法会创建一个新的线程，与原线程并行运行互不影响；"),t("code",[s._v("Join")]),s._v("方法将线程直接和原线程合并，执行完子线程后才会执行原线程。")]),s._v(" "),t("br"),s._v(" "),t("h1",{attrs:{id:"_5-线程池"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-线程池"}},[s._v("#")]),s._v(" 5 线程池")]),s._v(" "),t("p",[t("code",[s._v("创建线程")]),s._v("需要时间，当我们有大量线程要创建时，通过"),t("code",[s._v("Thread")]),s._v("创建线程消耗的时间较多。因此，使用"),t("code",[s._v("线程池")]),s._v("是一种比较好的方法。")]),s._v(" "),t("br"),s._v(" "),t("h2",{attrs:{id:"_5-1-适用条件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-适用条件"}},[s._v("#")]),s._v(" 5.1 适用条件")]),s._v(" "),t("ul",[t("li",[s._v("线程不需要持续运行，因为线程池创建的都是==后台线程==")]),s._v(" "),t("li",[s._v("线程工作量较小")]),s._v(" "),t("li",[s._v("线程只有单个参数，且为==object类型==")])]),s._v(" "),t("br"),s._v(" "),t("h2",{attrs:{id:"_5-2-示例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-示例"}},[s._v("#")]),s._v(" 5.2 示例")]),s._v(" "),t("div",{staticClass:"language-Java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DownloadFile")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("object o"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("WriteLine")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("$"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"[Running]{Environment.CurrentManagedThreadId}-"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n                      $"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{Thread.GetCurrentProcessorId()}-"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("\n                      $"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{Thread.CurrentThread.ManagedThreadId}"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Thread"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Sleep")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" i "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 加入线程池")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ThreadPool"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("QueueUserWorkItem")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DownloadFile")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("br"),s._v(" "),t("h1",{attrs:{id:"_6-任务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-任务"}},[s._v("#")]),s._v(" 6 任务")]),s._v(" "),t("h2",{attrs:{id:"_6-1-创建任务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-创建任务"}},[s._v("#")]),s._v(" 6.1 创建任务")]),s._v(" "),t("p",[t("code",[s._v("创建任务")]),s._v("有两种方法：直接创建、通过任务工厂创建")]),s._v(" "),t("div",{staticClass:"language-Java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Method1.直接创建")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Task")]),s._v(" task1 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Task")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TaskTest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("task1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),s._v("Start")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Method2.通过任务工厂创建")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TaskFactory")]),s._v(" taskFactory "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TaskFactory")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Task")]),s._v(" task2 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("taskFactory"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),s._v("StartNew")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TaskTest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("br"),s._v(" "),t("h2",{attrs:{id:"_6-2-连续任务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-连续任务"}},[s._v("#")]),s._v(" 6.2 连续任务")]),s._v(" "),t("p",[t("code",[s._v("连续任务")]),s._v("是指，两个任务的执行有先后顺序，一个任务执行完后另一个任务紧接着执行。创建连续任务可借助"),t("code",[s._v("ContinueWith方法")]),s._v("实现")]),s._v(" "),t("div",{staticClass:"language-Java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("First")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("WriteLine")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"I\'m the first task."')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Second")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("WriteLine")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"I\'m the second task."')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Main")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("string"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" args"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Step1.创建连续任务")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Task")]),s._v(" firstTask "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Task")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("First")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Task")]),s._v(" secondTask "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("firstTask"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),s._v("ContinueWith")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Second")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    \n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Step2.启动任务")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("firstTask"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),s._v("Start")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("br"),s._v(" "),t("h1",{attrs:{id:"_7-锁"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-锁"}},[s._v("#")]),s._v(" 7 锁")]),s._v(" "),t("h2",{attrs:{id:"_7-1-定义"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-定义"}},[s._v("#")]),s._v(" 7.1 定义")]),s._v(" "),t("p",[t("code",[s._v("锁")]),s._v("可以用于解决"),t("code",[s._v("资源访问冲突")]),s._v("的问题，不同的线程要使用"),t("code",[s._v("同一把锁")]),s._v("，只有拥有"),t("code",[s._v("锁")]),s._v("的线程才能运行代码。")]),s._v(" "),t("div",{staticClass:"language-Java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Step1.创建一把锁")]),s._v("\nobject _lock "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("object")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Step2.将可能冲突的资源锁住")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("lock")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("_lock"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("br"),s._v(" "),t("h2",{attrs:{id:"_7-2-死锁"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-2-死锁"}},[s._v("#")]),s._v(" 7.2 死锁")]),s._v(" "),t("p",[t("code",[s._v("死锁")]),s._v("的产生原因是不同线程"),t("code",[s._v("锁的顺序")]),s._v("不同，避免"),t("code",[s._v("死锁")]),s._v("的方案就是一开始就确定"),t("code",[s._v("锁的顺序")]),s._v("。")])])}),[],!1,null,null,null);a.default=e.exports}}]);